---
title: ConvAI CLI
subtitle: Manage ElevenLabs conversational AI agents using an "agents as code" approach with local configuration files.
---

## Overview

The ElevenLabs ConvAI CLI is a TypeScript-based command-line tool that treats conversational AI agents as code. It provides local configuration management, multi-environment support, template system, and seamless synchronization with the ElevenLabs platform.

## Key features

- **Agents as Code**: Manage conversational AI agents through local configuration files
- **Multi-environment Support**: Separate configurations for development, staging, and production environments
- **Template System**: Six pre-built templates for common use cases
- **Secure Authentication**: Multi-layered security with OS keychain integration
- **Real-time Synchronization**: Watch mode for automatic config updates
- **Tool Management**: Webhook and client-side tool integration
- **Widget Generation**: Generate HTML embed code for web integration

## Installation

The CLI requires Node.js version 16.0.0 or higher.

<CodeBlocks>
```bash title="npm"
npm install -g @elevenlabs/convai-cli
```

```bash title="pnpm"
pnpm add -g @elevenlabs/convai-cli
```

```bash title="yarn"
yarn global add @elevenlabs/convai-cli
```

</CodeBlocks>

After installation, the `convai` command will be available globally in your terminal.

## Quick start

<Steps>
### Initialize a new project

```bash
convai init
```

This creates the project structure with configuration directories and registry files.

### Authenticate with ElevenLabs

```bash
convai login
```

Enter your ElevenLabs API key when prompted. The CLI will verify the key and store it securely.

### Create your first agent

```bash
convai add agent "My Assistant" --template assistant
```

This creates a new agent configuration using the assistant template.

### Synchronize with ElevenLabs platform

```bash
convai sync
```

This uploads your local agent configuration to the ElevenLabs platform.

</Steps>

## Project structure

The CLI creates a structured project directory:

```
your_project/
├── agents.json              # Central agent configuration registry
├── tools.json               # Tool definitions registry
├── agent_configs/           # Environment-specific agent configs
│   ├── prod/                # Production environment configs
│   ├── dev/                 # Development environment configs
│   └── staging/             # Staging environment configs
├── tool_configs/            # Tool configuration files
└── convai.lock             # Lock file with agent IDs and hashes
```

## Authentication

The CLI uses a multi-layered authentication system for secure API key management:

<Accordion title="Authentication methods (by priority)">
  1. **Environment variables** (highest priority): `ELEVENLABS_API_KEY` 2. **OS keychain/credential
  store**: Uses the keytar library for secure storage 3. **Secure file storage**:
  `~/.convai/api_key` with restricted permissions (600)
</Accordion>

### Authentication commands

<CodeBlocks>
```bash title="Login"
convai login
```

```bash title="Check login status"
convai whoami
```

```bash title="Logout"
convai logout
```

</CodeBlocks>

## Agent management

### Creating agents

Create agents using pre-built templates:

```bash
convai add agent "Agent Name" [options]
```

**Options:**

- `--template <type>`: Choose from available templates (default: default)
- `--env <env>`: Target environment (default: dev)
- `--skip-upload`: Create locally without uploading to platform

**Example:**

```bash
convai add agent "Customer Support Bot" --template customer-service --env prod
```

### Templates

The CLI provides six pre-built templates for common use cases:

<AccordionGroup>
<Accordion title="default">
Complete configuration with all available fields, sensible defaults, full voice/text support, widget customization, and evaluation criteria.
</Accordion>

<Accordion title="minimal">
  Essential fields only including basic prompt, language, TTS, and conversation settings.
</Accordion>

<Accordion title="voice-only">
  Optimized for voice interactions with disabled text input and advanced voice settings.
</Accordion>

<Accordion title="text-only">Text-focused conversations with disabled voice features.</Accordion>

<Accordion title="customer-service">
  Professional empathetic prompts, low temperature (0.1), 30-minute duration, and evaluation
  criteria.
</Accordion>

<Accordion title="assistant">
General-purpose AI assistant with balanced creativity (0.3) and versatile voice/text support.
</Accordion>
</AccordionGroup>

### Template commands

<CodeBlocks>
```bash title="List available templates"
convai templates list
```

```bash title="Show template configuration"
convai templates show <template>
```

</CodeBlocks>

### Synchronization

Keep your local configurations synchronized with the ElevenLabs platform:

<CodeBlocks>
```bash title="Sync all agents"
convai sync
```

```bash title="Sync specific agent"
convai sync --agent "Agent Name"
```

```bash title="Sync specific environment"
convai sync --env prod
```

```bash title="Preview changes (dry run)"
convai sync --dry-run
```

</CodeBlocks>

### Status and monitoring

<CodeBlocks>
```bash title="Check agent status"
convai status
```

```bash title="Check specific agent"
convai status --agent "Agent Name"
```

```bash title="Watch for changes"
convai watch --interval 5
```

</CodeBlocks>

### Import and export

<CodeBlocks>
```bash title="Import existing agents"
convai fetch --env prod
```

```bash title="Search and import agents"
convai fetch --search "customer"
```

```bash title="List all agents"
convai list-agents
```

</CodeBlocks>

## Tool management

The CLI supports two types of tools for extending agent capabilities:

### Webhook tools

HTTP API integrations with authentication and timeout configuration:

```bash
convai add webhook-tool "API Integration" --config-path ./tool-config.json
```

### Client tools

Direct client-side integrations:

```bash
convai add client-tool "Client Function" --config-path ./client-config.json
```

## Widget generation

Generate HTML embed code for web integration:

```bash
convai widget "Agent Name" --env prod
```

This outputs HTML code like:

```html
<elevenlabs-convai agent-id="agent_id_here"></elevenlabs-convai>
<script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async></script>
```

## Configuration files

### Agent configuration structure

Each agent configuration includes:

```json focus={1-20}
{
  "name": "Agent Name",
  "conversation_config": {
    "agent": {
      "prompt": "You are a helpful assistant...",
      "llm": {
        "model": "eleven-multilingual-v1",
        "temperature": 0.3
      },
      "language": "en",
      "tools": []
    },
    "tts": {
      "model": "eleven-multilingual-v1",
      "voice_id": "pNInz6obpgDQGcFmaJgB",
      "audio_format": {
        "format": "pcm",
        "sample_rate": 44100
      }
    },
    "asr": {
      "model": "nova-2-general",
      "language": "auto"
    },
    "conversation": {
      "max_duration_seconds": 1800,
      "text_only": false,
      "client_events": []
    }
  },
  "platform_settings": {
    "widget": {
      "conversation_starters": [],
      "branding": {}
    }
  },
  "tags": ["environment:dev"]
}
```

### Environment management

The CLI supports multiple environments with separate configurations:

<Tabs>
<Tab title="Development">
```bash
convai add agent "Test Bot" --env dev
convai sync --env dev
```
</Tab>

<Tab title="Staging">
  ```bash convai add agent "Test Bot" --env staging convai sync --env staging ```
</Tab>

<Tab title="Production">
```bash
convai add agent "Test Bot" --env prod
convai sync --env prod
```
</Tab>
</Tabs>

## Development workflows

### New project setup

<Steps>
### Initialize the project
```bash
convai init
```

### Authenticate

```bash
convai login
```

### Create your first agent

```bash
convai add agent "My Agent" --template assistant
```

### Sync to platform

```bash
convai sync
```

</Steps>

### Multi-environment development

<Steps>
### Create development version
```bash
convai add agent "Support Bot" --env dev --template customer-service
```

### Create production version

```bash
convai add agent "Support Bot" --env prod --template customer-service
```

### Sync environments separately

```bash
convai sync --env dev
convai sync --env prod
```

</Steps>

### Import existing agents

<Steps>
### Initialize project
```bash
convai init
convai login
```

### Import from production

```bash
convai fetch --env prod
```

### Sync local changes

```bash
convai sync
```

</Steps>

### Development with watch mode

```bash
# Start watch mode for automatic syncing
convai watch --env dev --interval 5

# In another terminal, edit your configurations
# Changes will be automatically synced
```

## Advanced features

### Hash-based change detection

The CLI uses MD5 hashes to detect configuration changes and prevent unnecessary updates. This information is stored in the `convai.lock` file.

### Atomic operations

All synchronization operations are atomic - either all changes succeed or none are applied.

### Dynamic variables

Tool configurations support parameterized variables for flexible integrations:

```json
{
  "tool_name": "API Call",
  "parameters": {
    "endpoint": "${API_ENDPOINT}",
    "timeout": "${TIMEOUT:-5000}"
  }
}
```

## Troubleshooting

<AccordionGroup>
<Accordion title="Authentication issues">
**Problem**: CLI reports authentication errors

**Solutions**:

1. Check your login status: `convai whoami`
2. Re-login with fresh credentials: `convai logout && convai login`
3. Set environment variable: `export ELEVENLABS_API_KEY=your_key`
4. Verify API key has correct permissions in ElevenLabs dashboard
   </Accordion>

<Accordion title="Agent not found errors">
**Problem**: CLI cannot find expected agents

**Solutions**:

1. List available agents: `convai list-agents`
2. Check agent status: `convai status --env <environment>`
3. Verify environment configuration
4. Check agent name spelling and case sensitivity
   </Accordion>

<Accordion title="Sync failures">
**Problem**: Synchronization fails or produces errors

**Solutions**:

1. Use dry-run to preview changes: `convai sync --dry-run`
2. Check the lock file for corrupted entries: `cat convai.lock`
3. Reset project state: Remove `convai.lock`, run `convai init`
4. Verify network connectivity and API key permissions
   </Accordion>

<Accordion title="Configuration validation errors">
**Problem**: Configuration files contain invalid data

**Solutions**:

1. Validate JSON syntax using a JSON validator
2. Compare against template configurations: `convai templates show <template>`
3. Check required fields are present
4. Verify field value types match expected schema
   </Accordion>
</AccordionGroup>

### Common error messages

| Error                   | Cause                           | Solution                        |
| ----------------------- | ------------------------------- | ------------------------------- |
| `API key not found`     | Missing authentication          | Run `convai login`              |
| `Agent not found`       | Agent doesn't exist on platform | Check with `convai list-agents` |
| `Invalid configuration` | Malformed JSON                  | Validate configuration syntax   |
| `Sync failed`           | Network or permission issue     | Check API key and connectivity  |

## Technical details

### Core modules

- **cli.ts**: Main command interface using commander.js
- **config.ts**: Configuration and credential management
- **auth.ts**: Multi-layered authentication system
- **templates.ts**: Agent template system with TypeScript interfaces
- **utils.ts**: Configuration hashing, file operations, lock file management
- **elevenlabs-api.ts**: ElevenLabs API integration layer
- **tools.ts**: Tool management and configuration

### Type safety

The CLI is built with full TypeScript implementation including:

- Comprehensive interfaces for all configuration objects
- Type guards for API responses
- Strict configuration validation
- Runtime type checking

### Security features

- **Secure credential storage**: OS keychain integration via keytar library
- **File permissions**: Restricted access (600/700) on Unix systems
- **Cross-platform support**: Windows, macOS, and Linux compatibility
- **Environment variable support**: For CI/CD and containerized environments

## API reference

### Global options

All commands support these global options:

- `--help, -h`: Show command help
- `--version, -v`: Show CLI version
- `--verbose`: Enable verbose logging
- `--config <path>`: Specify custom config directory

### Exit codes

- `0`: Success
- `1`: General error
- `2`: Authentication error
- `3`: Configuration error
- `4`: Network error
- `5`: File system error

For additional support, visit the [ElevenLabs documentation](https://elevenlabs.io/docs) or contact our support team.
