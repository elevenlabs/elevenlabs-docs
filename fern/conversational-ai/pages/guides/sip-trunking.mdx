---
title: SIP trunking
subtitle: Connect your existing phone system with ElevenLabs conversational AI agents using SIP trunking
---

## Overview

SIP (Session Initiation Protocol) trunking allows you to connect your existing telephony infrastructure directly to ElevenLabs conversational AI agents.
This integration enables enterprise customers to use their existing phone systems while leveraging ElevenLabs' advanced voice AI capabilities.

With SIP trunking, you can:

- Connect your Private Branch Exchange (PBX) or SIP-enabled phone system to ElevenLabs' voice AI platform
- Route calls to AI agents without changing your existing phone infrastructure
- Handle both inbound and outbound calls
- Leverage encrypted TLS transport and media encryption for enhanced security

## How SIP trunking works

SIP trunking establishes a direct connection between your telephony infrastructure and the ElevenLabs platform:

1. **Inbound calls**: Calls from your SIP trunk are routed to the ElevenLabs platform using your configured SIP INVITE address.
2. **Outbound calls**: Calls initiated by ElevenLabs are routed to your SIP trunk using your configured hostname, enabling your agents to make outgoing calls.
3. **Authentication**: Connection security for the signaling is maintained through either digest authentication (username/password) or Access Control List (ACL) authentication based on the signaling source IP.
4. **Signaling and Media**: The initial call setup (signaling) supports multiple transport protocols including TLS for encrypted communication. Once the call is established, the actual audio data (RTP stream) can be encrypted based on your media encryption settings.

## Requirements

Before setting up SIP trunking, ensure you have:

1. A SIP-compatible PBX or telephony system
2. Phone numbers that you want to connect to ElevenLabs
3. Administrator access to your SIP trunk configuration
4. Appropriate firewall settings to allow SIP traffic
5. **TLS Support**: For enhanced security, ensure your SIP trunk provider supports TLS transport
6. **Audio codec compatibility**:
   Your system must support either G711 or G722 audio codecs or be capable of resampling audio on your end. ElevenLabs' SIP deployment outputs and receives audio at this sample rate. This is independent of any audio format configured on the agent for direct websocket connections.

## Setting up SIP trunking

<Steps>
  <Step title="Navigate to Phone Numbers">
    Go to the [Phone Numbers section](https://elevenlabs.io/app/conversational-ai/phone-numbers) in the ElevenLabs Conversational AI dashboard.
  </Step>
  <Step title="Import SIP Trunk">
    Click on "Import a phone number from SIP trunk" button to open the configuration dialog.

    <Frame background="subtle">
      <img src="/assets/images/conversational-ai/sip-trunk-select.png" alt="Select SIP trunk option" />
    </Frame>

    <Frame background="subtle">
      <img src="/assets/images/conversational-ai/sip-trunk.png" alt="SIP trunk configuration dialog" />
    </Frame>

  </Step>
  <Step title="Enter basic configuration">
    Complete the basic configuration with the following information:

    - **Label**: A descriptive name for the phone number
    - **Phone Number**: The E.164 formatted phone number to connect (e.g., +15551234567)

    <Frame background="subtle">
      <img src="/assets/images/conversational-ai/sip-trunk-inbound.png" alt="SIP trunk basic configuration" />
    </Frame>

  </Step>
    <Step title="Configure transport and encryption">
    Configure the transport protocol and media encryption settings for enhanced security:

    - **Transport Type**: Select the transport protocol for SIP signaling:
      - **TCP**: Standard TCP transport
      - **TLS**: Encrypted TLS transport for enhanced security
    - **Media Encryption**: Configure encryption for RTP media streams:
      - **Disabled**: No media encryption
      - **Allowed**: Permits encrypted media streams
      - **Required**: Enforces encrypted media streams

    <Frame background="subtle">
      <img src="/assets/images/conversational-ai/siptrunktls.png" alt="Select TLS or TCP transport" />
    </Frame>

    <Frame background="subtle">
      <img src="/assets/images/conversational-ai/siptrunkmediaencryption.png" alt="Select media encryption setting" />
    </Frame>

    <Tip>
      **Security Best Practice**: Use TLS transport with Required media encryption for maximum security. This ensures both signaling and media are encrypted end-to-end.
    </Tip>

  </Step>
  <Step title="Configure outbound settings">
    Configure where ElevenLabs should send calls for your phone number:

    - **Address**: Hostname or IP address where the SIP INVITE is sent (e.g., `sip.telnyx.com`). This should be a hostname or IP address only, not a full SIP URI.
    - **Transport Type**: Select the transport protocol for SIP signaling:
      - **TCP**: Standard TCP transport
      - **TLS**: Encrypted TLS transport for enhanced security
    - **Media Encryption**: Configure encryption for RTP media streams:
      - **Disabled**: No media encryption
      - **Allowed**: Permits encrypted media streams
      - **Required**: Enforces encrypted media streams

    <Frame background="subtle">
      <img src="/assets/images/conversational-ai/sip-outbound.png" alt="SIP trunk outbound configuration" />
    </Frame>

    <Tip>
      **Security Best Practice**: Use TLS transport with Required media encryption for maximum security. This ensures both signaling and media are encrypted end-to-end.
    </Tip>

    <Note>
      The **Address** field specifies where ElevenLabs will send outbound calls from your AI agents. Enter only the hostname or IP address without the `sip:` protocol prefix.
    </Note>

  </Step>
  <Step title="Add custom headers (optional)">
    If your SIP trunk provider requires specific headers for call routing or identification:

    - Click "Add Header" to add custom SIP headers
    - Enter the header name and value as required by your provider
    - You can add multiple headers as needed

    Custom headers are included with all outbound calls and can be used for:
    - Call routing and identification
    - Billing and tracking purposes
    - Provider-specific requirements

  </Step>
  <Step title="Configure authentication (optional)">
    Provide digest authentication credentials if required by your SIP trunk provider:

    - **SIP Trunk Username**: Username for SIP digest authentication
    - **SIP Trunk Password**: Password for SIP digest authentication

    If left empty, Access Control List (ACL) authentication will be used, which requires you to allowlist ElevenLabs IP addresses in your provider's settings.

    <Info>
      **Authentication Methods**:
      - **Digest Authentication**: Uses username/password credentials for secure authentication (recommended)
      - **ACL Authentication**: Uses IP address allowlisting for access control

      **Digest Authentication is strongly recommended** as it provides better security without relying on IP allowlisting, which can be complex to manage with dynamic IP addresses.
    </Info>

  </Step>
  <Step title="Complete Setup">
    Click "Import" to finalize the configuration.
  </Step>
</Steps>

## Client Data and Personalization

To ensure proper forwarding and traceability of call metadata, include the following custom SIP headers in your webhook payload and SIP INVITE request:

- **X-CALL-ID**: Unique identifier for the call
- **X-CALLER-ID**: Identifier for the calling party

These headers enable the system to associate call metadata with the conversation and provide context for personalization.

### Fallback Header Support

If the standard headers above are not present, the system will automatically look for the Twilio-specific SIP header:

- **sip.twilio.callSid**: Twilio's unique call identifier

This fallback ensures compatibility with Twilio's Elastic SIP Trunking without requiring configuration changes.

### Custom Provider Headers

If you're using a SIP provider other than Twilio and your platform uses different headers for call or caller identification please contact our support team.

### Processing Flow

Once the relevant metadata is received through any of the supported headers, the `caller_id` and/or `call_id` are available in the [pre-call webhook](/docs/conversational-ai/customization/personalization/twilio-personalization#how-it-works) and as [system dynamic variables](/docs/conversational-ai/customization/personalization/dynamic-variables#system-dynamic-variables).

## Call Transfer Configuration

SIP trunking supports transferring calls to human operators using two different methods. The choice of transfer method depends on your transport protocol and SIP provider requirements.

### Transfer Methods

<AccordionGroup>
  <Accordion title="Conference Transfer">
    **Recommended for most configurations** Conference transfer creates a three-way conference call,
    then removes the AI agent, leaving only the caller and the human operator connected. -
    **Compatible with**: All transport protocols (TCP, TLS) - **Compatible with**: All media
    encryption settings - **Works with**: All SIP providers - **Use when**: You want maximum
    compatibility across different configurations
  </Accordion>

  <Accordion title="SIP REFER Transfer">
    **Direct transfer using SIP protocol** SIP REFER uses the SIP protocol to directly transfer the
    call to the destination without creating a conference. - **Compatible with**: TCP transport only
    - **Media encryption**: Must be disabled for Twilio - **Provider requirements**: Your SIP trunk
    must support SIP REFER protocol - **Use when**: You need direct transfer without conference
    bridging
    <Warning>
      **Known Limitation**: SIP REFER transfer does not work with TLS transport due to a platform
      limitation. Use TCP transport or switch to Conference transfer when using TLS.
    </Warning>
  </Accordion>
</AccordionGroup>

### Provider-Specific Requirements

<AccordionGroup>
  <Accordion title="Twilio SIP Trunking">
    When using Twilio as your SIP provider with transfer functionality: - **Transport**: Use TCP
    (not TLS) for SIP REFER transfers - **Media Encryption**: Must be disabled for SIP REFER
    transfers - **Alternative**: Use Conference transfer with any transport protocol and encryption
    settings
    <Note>
      For Twilio users requiring encrypted connections, use Conference transfer with TLS transport
      and enabled media encryption.
    </Note>
  </Accordion>

  <Accordion title="Other SIP Providers">
    For providers other than Twilio: - **SIP REFER**: Verify your provider supports the SIP REFER
    protocol - **Transport**: Use TCP transport for SIP REFER transfers - **Conference Transfer**:
    Works with all providers regardless of transport protocol
  </Accordion>
</AccordionGroup>

### Configuration Recommendations

Choose your transfer configuration based on your requirements:

<CardGroup cols={2}>
  <Card title="Maximum Security" icon="shield-check">
    **Conference Transfer + TLS + Required Media Encryption** - Transport: TLS - Media Encryption:
    Required - Transfer Method: Conference - Compatible with all providers
  </Card>

  <Card title="Direct Transfer" icon="phone-arrow-down-left">
    **SIP REFER + TCP + Disabled Media Encryption** - Transport: TCP - Media Encryption: Disabled
    (required for Twilio) - Transfer Method: SIP REFER - Verify provider supports SIP REFER
  </Card>
</CardGroup>

## Assigning Agents to Phone Numbers

After importing your SIP trunk phone number, you can assign it to a conversational AI agent:

1. Go to the Phone Numbers section in the Conversational AI dashboard
2. Select your imported SIP trunk phone number
3. Click "Assign Agent"
4. Select the agent you want to handle calls to this number

Learn more about configuring transfer functionality in the [Transfer to Human](/docs/conversational-ai/customization/tools/human-transfer) guide.

## Troubleshooting

<AccordionGroup>

{' '}
<Accordion title="Transfer Issues">
  If call transfers are not working properly: **For SIP REFER Transfer Issues:** 1. **Verify
  transport protocol**: SIP REFER only works with TCP transport, not TLS 2. **Check media
  encryption**: For Twilio, media encryption must be disabled when using SIP REFER 3. **Confirm
  provider support**: Verify your SIP trunk provider supports the SIP REFER protocol 4. **Test
  direct outbound calls**: Ensure you can make direct calls to the transfer destination number **For
  Conference Transfer Issues:** 1. **Check network connectivity**: Ensure both endpoints can
  establish media connections 2. **Verify codec compatibility**: Confirm both endpoints support the
  same audio codecs 3. **Test basic calling**: Verify standard inbound/outbound calls work before
  testing transfers **General Transfer Troubleshooting:** 1. **Switch transfer methods**: If SIP
  REFER fails, try Conference transfer 2. **Check firewall rules**: Ensure RTP media ports
  (10000-60000) are open for conference calls 3. **Review conversation logs**: Check conversation
  IDs for specific error messages 4. **Provider-specific settings**: Contact your SIP provider to
  confirm transfer protocol support
  <Warning>
    **Twilio + TLS + SIP REFER = Not Supported**: This combination will fail. Use either Conference
    transfer with TLS, or SIP REFER with TCP and disabled media encryption.
  </Warning>
</Accordion>

  <Accordion title="Connection Issues">
    If you're experiencing connection problems: 
    
    1. Verify your SIP trunk configuration on both the ElevenLabs side and your provider side
    2. Check that your firewall allows SIP signaling traffic on the configured transport protocol and port (5060 for TCP, 5061 for TLS) and ensure there is no whitelisting applied
    3. Confirm that your address hostname is correctly formatted and accessible
    4. Test with and without digest authentication credentials
    5. If using TLS transport, ensure your provider's TLS certificates are valid and properly configured
    6. Try different transport types (TCP only, as UDP is not currently available) to isolate TLS-specific issues
    
    **Important Network Architecture Information:**
    
    - ElevenLabs runs multiple SIP servers behind the load balancer `sip.rtc.elevenlabs.io`
    - The SIP servers communicate directly with your SIP server, bypassing the load balancer
    - SIP requests may come from different IP addresses due to our distributed infrastructure
    - If your security policy requires whitelisting inbound traffic, please contact our support team for assistance.
    
  </Accordion>
  <Accordion title="Authentication Failures">
    If calls are failing due to authentication issues:

    1. Double-check your SIP trunk username and password if using digest authentication
    2. Check your SIP trunk provider's logs for specific authentication error messages
    3. Verify that custom headers, if configured, match your provider's requirements
    4. Test with simplified configurations (no custom headers) to isolate authentication issues

  </Accordion>
  <Accordion title="TLS and Encryption Issues">
    If you're experiencing issues with TLS transport or media encryption:

    1. Verify that your SIP trunk provider supports TLS transport on port 5061
    2. Check certificate validity, expiration dates, and trust chains
    3. Ensure your provider supports SRTP media encryption if using "Required" media encryption
    4. Test with "Allowed" media encryption before using "Required" to isolate encryption issues
    5. Try TCP transport to isolate TLS-specific problems (UDP is not currently available)
    6. Contact your SIP trunk provider to confirm TLS and SRTP support

  </Accordion>
  <Accordion title="Custom Headers Issues">
    If you're having problems with custom headers:

    1. Verify the exact header names and values required by your provider
    2. Check for case sensitivity in header names
    3. Ensure header values don't contain special characters that need escaping
    4. Test without custom headers first, then add them incrementally
    5. Review your provider's documentation for supported custom headers

  </Accordion>
  <Accordion title="No Audio or One-Way Audio">
    If the call connects but there's no audio or audio only flows one way:

    1. Verify that your firewall allows UDP traffic for the RTP media stream (typically ports 10000-60000)
    2. Since RTP uses dynamic IP addresses, ensure firewall rules are not restricted to specific static IPs
    3. Check for Network Address Translation (NAT) issues that might be blocking the RTP stream
    4. If using "Required" media encryption, ensure both endpoints support SRTP
    5. Test with "Disabled" media encryption to isolate encryption-related audio issues

  </Accordion>
  <Accordion title="Audio Quality Issues">
    If you experience poor audio quality:

    1. Ensure your network has sufficient bandwidth (at least 100 Kbps per call) and low latency/jitter for UDP traffic
    2. Check for network congestion or packet loss, particularly on the UDP path
    3. Verify codec settings match on both ends
    4. If using media encryption, ensure both endpoints efficiently handle SRTP processing
    5. Test with different media encryption settings to isolate quality issues

  </Accordion>

</AccordionGroup>

## Limitations and Considerations

- Support for multiple concurrent calls depends on your subscription tier
- Call recording and analytics features are available but may require additional configuration
- Outbound calling capabilities may be limited by your SIP trunk provider
- **TLS Support**: Ensure your SIP trunk provider supports TLS 1.2 or higher for encrypted transport
- **Media Encryption**: SRTP support varies by provider; verify compatibility before requiring encryption
- **Audio format**: ElevenLabs' SIP deployment outputs and receives audio in G711 8kHz or G722 16kHz audio codecs. This is independent of any audio format configured on the agent for direct websocket connections. Your SIP trunk system must either support this format natively or perform resampling to match your system's requirements

## FAQ

<AccordionGroup>
  <Accordion title="Can I use my existing phone numbers with ElevenLabs?">
    Yes, SIP trunking allows you to connect your existing phone numbers directly to ElevenLabs'
    conversational AI platform without porting them.
  </Accordion>

<Accordion title="What SIP trunk providers are compatible with ElevenLabs?">
  ElevenLabs is compatible with most standard SIP trunk providers including Twilio, Vonage,
  RingCentral, Sinch, Infobip, Telnyx, Exotel, Plivo, Bandwidth, and others that support SIP
  protocol standards. TLS transport and SRTP media encryption are supported for enhanced security.
</Accordion>

<Accordion title="Should I use TLS transport for better security?">
  Yes, TLS transport is highly recommended for production environments. It provides encrypted SIP
  signaling which enhances security for your calls. Combined with required media encryption, it
  ensures comprehensive protection of your communications. Always verify your SIP trunk provider
  supports TLS before enabling it.
</Accordion>

<Accordion title="What's the difference between transport types?">
  - **TCP**: Reliable but unencrypted signaling, compatible with all transfer methods - **TLS**:
  Encrypted and reliable signaling (recommended for production), but has limitations with SIP REFER
  transfers
  <Note>
    UDP transport is not currently available. For security-critical applications, use TLS transport
    with Conference transfer method.
  </Note>
  <Warning>
    **Transfer Compatibility**: SIP REFER transfers only work with TCP transport. If you need TLS
    encryption and transfers, use Conference transfer method.
  </Warning>
</Accordion>

<Accordion title="What are custom headers used for?">
  Custom SIP headers allow you to include provider-specific information with outbound calls. Common
  uses include call routing, billing codes, caller identification, and meeting specific provider
  requirements.
</Accordion>

<Accordion title="How many concurrent calls are supported?">
  The number of concurrent calls depends on your subscription plan. Enterprise plans typically allow
  for higher volumes of concurrent calls.
</Accordion>

{' '}
<Accordion title="Can I route calls conditionally to different agents?">
  Yes, you can use your existing PBX system's routing rules to direct calls to different phone
  numbers, each connected to different ElevenLabs agents.
</Accordion>

  <Accordion title="Why are my call transfers failing?">
    Transfer failures are often due to transport protocol and encryption compatibility issues:
    
    **Common Causes:**
    - Using SIP REFER with TLS transport (not supported)
    - Using SIP REFER with Twilio while media encryption is enabled
    - SIP provider doesn't support SIP REFER protocol
    - Firewall blocking RTP media ports for conference transfers
    
    **Solutions:**
    - Switch to Conference transfer for maximum compatibility
    - Use TCP transport if you need SIP REFER transfers
    - For Twilio: disable media encryption when using SIP REFER
    - Verify your provider supports your chosen transfer method
    
    See the [Transfer Issues troubleshooting section](#troubleshooting) for detailed steps.
  </Accordion>
</AccordionGroup>

## Next steps

- [Learn about creating conversational AI agents](/docs/conversational-ai/quickstart)
