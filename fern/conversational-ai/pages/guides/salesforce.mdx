---
title: Salesforce
subtitle: Learn how to integrate our Conversational AI platform with Salesforce for enhanced customer relationship management
---

## Overview

With our Salesforce integration, your conversational AI agents can access customer data, manage leads, and create opportunities directly within Salesforce. This integration streamlines the sales and customer service processes by automatically retrieving customer information, checking for existing records, and securely creating new leads or opportunities. Benefits include faster customer qualification, reduced manual data entry, and enhanced customer experience through personalized interactions.

## Demo Video

Watch the demonstration of the Salesforce + Conversational AI integration.

<Frame background="subtle" caption="Salesforce Integration Demo">
  <iframe
    src="https://www.loom.com/share/2c7664ecddff40cda9b03ebe3f61d854"
    frameBorder="0"
    webkitallowfullscreen
    mozallowfullscreen
    allowFullScreen
    style={{ width: '100%', height: '360px' }}
  ></iframe>
</Frame>

## How it works

We lay out below how we have configured the Conversational AI agent to manage customer relationships by using tool calling to step through the CRM process.
Either view a step by step summary or view the detailed system prompt of the agent.

<Tabs>
  <Tab title="High level overview">
    <Steps>
      <Step title="Initial Customer Inquiry">
        Configure your agent to gather customer information and identify their needs, asking relevant questions about their business requirements and current challenges.
      </Step>

      <Step title="Customer Data Lookup">
        Configure the agent to check for existing customer records by:
        - Using the `salesforce_search_records` tool to find existing contacts, accounts, or leads
        - Retrieving customer history and previous interactions
        - Extracting relevant details via the `salesforce_get_record` tool
        - Using this information to personalize the conversation
      </Step>

      <Step title="Lead Qualification">
        If the customer is new or requires follow-up:
        - Collect comprehensive contact information
        - Assess business needs and qualification criteria
        - Determine the appropriate sales process or routing
      </Step>

      <Step title="Record Creation">
        - Use the `salesforce_create_record` tool after information verification
        - Create leads, contacts, or opportunities as appropriate
        - Confirm record creation with the customer
        - Inform them about next steps in the sales process
      </Step>
    </Steps>
  </Tab>

  <Tab title="Detailed system prompt">
    ```
    You are a helpful sales assistant responsible for managing customer relationships and creating records in Salesforce using the available tools. Be friendly, professional, and consultative in your approach.

    Begin by asking about the customer's business needs and current challenges.
    Then, ask relevant qualification questions to understand their requirements, one question at a time, and wait for their response before proceeding.

    Once you have basic information about the customer, say you will check for any existing records in the system.
    - Call salesforce_search_records to look for existing contacts, accounts, or leads
    - If found, call salesforce_get_record to get detailed information about the existing record
    - Use any existing information to personalize the conversation and avoid asking for data you already have

    After checking existing records, qualify the customer by gathering:
    - Company name and size
    - Industry and business type
    - Current challenges and pain points
    - Budget and timeline information
    - Decision-making authority

    Once you have qualified the customer, gather the following contact details:
    - Full name and job title
    - Business email address (ensure it's formatted correctly)
    - Phone number
    - Company name and address
    - Read the email back to the customer to confirm accuracy

    Once all information is confirmed, explain that you will create a record in our system.
    Create the appropriate record (Lead, Contact, or Opportunity) using the salesforce_create_record tool.
    Thank the customer and explain the next steps in the sales process.

    Clarifications:
    - Always check for existing records before creating new ones
    - If the customer asks to proceed, do so with the existing information
    - Qualify leads appropriately based on their responses

    Guardrails:
    - Do not discuss topics outside of business solutions and sales
    - Always maintain professional communication
    - Protect customer privacy and handle data securely
    ```
  </Tab>
</Tabs>

<Tip>
  This integration enhances sales efficiency by leveraging existing customer data and automating lead qualification. All API calls require proper OAuth authentication and secret handling.
</Tip>

## Authentication Setup

Before configuring the tools, you must set up OAuth 2.0 authentication with Salesforce using a Connected App.

### Step 1: Create a Connected App in Salesforce

1. Log into your Salesforce org as an administrator
2. Go to **Setup** → **App Manager** (or **Setup** → **Build** → **Create** → **Apps** in Classic)
3. Click **New Connected App**
4. Complete the basic information:
   - **Connected App Name**: ElevenLabs Conversational AI
   - **API Name**: ElevenLabs_Conversational_AI
   - **Contact Email**: Your administrator email
5. In the **API (Enable OAuth Settings)** section:
   - Check **Enable OAuth Settings**
   - **Callback URL**: `https://api.elevenlabs.io/oauth/callback` (or your specific callback URL)
   - **Selected OAuth Scopes**: Add these scopes:
     - **Full access (full)**
     - **Perform requests on your behalf at any time (refresh_token, offline_access)**
     - **Access and manage your data (api)**
6. Click **Save**
7. Copy the **Consumer Key** and **Consumer Secret** - you'll need these for authentication

### Step 2: Configure OAuth Client Credentials Flow

<Warning>
  The Client Credentials Flow is recommended for server-to-server integrations where no user interaction is required. Ensure your Salesforce admin has enabled this flow.
</Warning>

1. **Enable Client Credentials Flow**:
   - In your Connected App, go to **Manage** → **Edit Policies**
   - In **OAuth Policies**, select **Client Credentials Flow**
   - Set **Permitted Users** to **Admin approved users are pre-authorized**
   - Click **Save**

2. **Create the OAuth Token**:
   - Method: `POST`
   - URL: `https://your-domain.my.salesforce.com/services/oauth2/token`
   - Headers: `Content-Type: application/x-www-form-urlencoded`
   - Body parameters:
     ```
     grant_type=client_credentials
     client_id=YOUR_CONSUMER_KEY
     client_secret=YOUR_CONSUMER_SECRET
     ```

3. **Create Authentication Secret**:
   - The response will include an `access_token`
   - Format the authorization header as: `Bearer {access_token}`
   - Save this as a secret in your agent's secrets with name `salesforce_auth`

<Note>
  Access tokens expire and will need to be refreshed periodically. Consider implementing token refresh logic or using a longer-lived approach for production use.
</Note>

## Tool Configurations

The integration with Salesforce employs three primary webhook tools to manage customer relationships. Use the tabs below to review each tool's configuration.

<Tabs>
  <Tab title="salesforce_search_records">
    **Name:** salesforce_search_records  
    **Description:** Searches for existing records in Salesforce using SOQL queries.  
    **Method:** GET  
    **URL:** `https://your-domain.my.salesforce.com/services/data/v58.0/query/?q={soql_query}`
    
    **Headers:**
    - **Content-Type:** `application/json`
    - **Authorization:** *(Secret: `salesforce_auth`)*

    **Query Parameters:**
    - **q:** SOQL query string (e.g., "SELECT Id, Name, Email FROM Contact WHERE Email = 'example@email.com'")

    **Tool JSON:**

    ```json
    {
      "type": "webhook",
      "name": "salesforce_search_records",
      "description": "Searches for existing records in Salesforce using SOQL queries.",
      "api_schema": {
        "url": "https://your-domain.my.salesforce.com/services/data/v58.0/query/",
        "method": "GET",
        "path_params_schema": [],
        "query_params_schema": [
          {
            "id": "q",
            "type": "string",
            "description": "SOQL query string to search for records. Example: SELECT Id, Name, Email FROM Contact WHERE Email = 'customer@example.com'",
            "dynamic_variable": "",
            "constant_value": "",
            "required": true,
            "value_type": "llm_prompt"
          }
        ],
        "request_body_schema": null,
        "request_headers": [
          {
            "type": "secret",
            "name": "Authorization",
            "secret_id": "YOUR_SALESFORCE_SECRET"
          },
          {
            "type": "value",
            "name": "Content-Type",
            "value": "application/json"
          }
        ]
      },
      "response_timeout_secs": 30,
      "dynamic_variables": {
        "dynamic_variable_placeholders": {}
      }
    }
    ```

  </Tab>

  <Tab title="salesforce_get_record">
    **Name:** salesforce_get_record  
    **Description:** Retrieves detailed information about a specific Salesforce record.  
    **Method:** GET  
    **URL:** `https://your-domain.my.salesforce.com/services/data/v58.0/sobjects/{object_type}/{record_id}`

    **Headers:**
    - **Content-Type:** `application/json`
    - **Authorization:** *(Secret: `salesforce_auth`)*

    **Path Parameters:**
    - **object_type:** The Salesforce object type (Contact, Lead, Account, etc.)
    - **record_id:** The unique Salesforce record ID

    **Tool JSON:**

    ```json
    {
      "type": "webhook",
      "name": "salesforce_get_record",
      "description": "Retrieves detailed information about a specific Salesforce record.",
      "api_schema": {
        "url": "https://your-domain.my.salesforce.com/services/data/v58.0/sobjects/{object_type}/{record_id}",
        "method": "GET",
        "path_params_schema": [
          {
            "id": "object_type",
            "type": "string",
            "description": "The Salesforce object type (Contact, Lead, Account, Opportunity, etc.)",
            "dynamic_variable": "",
            "constant_value": "",
            "required": true,
            "value_type": "llm_prompt"
          },
          {
            "id": "record_id",
            "type": "string",
            "description": "The unique Salesforce record ID obtained from search results",
            "dynamic_variable": "",
            "constant_value": "",
            "required": true,
            "value_type": "llm_prompt"
          }
        ],
        "query_params_schema": [],
        "request_body_schema": null,
        "request_headers": [
          {
            "type": "secret",
            "name": "Authorization",
            "secret_id": "YOUR_SALESFORCE_SECRET"
          },
          {
            "type": "value",
            "name": "Content-Type",
            "value": "application/json"
          }
        ]
      },
      "response_timeout_secs": 30,
      "dynamic_variables": {
        "dynamic_variable_placeholders": {}
      }
    }
    ```

  </Tab>

  <Tab title="salesforce_create_record">
    **Name:** salesforce_create_record  
    **Description:** Creates a new record in Salesforce.  
    **Method:** POST  
    **URL:** `https://your-domain.my.salesforce.com/services/data/v58.0/sobjects/{object_type}/`

    **Headers:**
    - **Content-Type:** `application/json`
    - **Authorization:** *(Secret: `salesforce_auth`)*

    **Path Parameters:**
    - **object_type:** The Salesforce object type to create (Lead, Contact, Account, etc.)

    **Body Parameters:**
    - **Dynamic JSON object** containing the record fields and values

    **Tool JSON:**

    ```json
    {
      "type": "webhook",
      "name": "salesforce_create_record",
      "description": "Creates a new record in Salesforce (Lead, Contact, Account, Opportunity, etc.)",
      "api_schema": {
        "url": "https://your-domain.my.salesforce.com/services/data/v58.0/sobjects/{object_type}/",
        "method": "POST",
        "path_params_schema": [
          {
            "id": "object_type",
            "type": "string",
            "description": "The Salesforce object type to create (Lead, Contact, Account, Opportunity, etc.)",
            "dynamic_variable": "",
            "constant_value": "",
            "required": true,
            "value_type": "llm_prompt"
          }
        ],
        "query_params_schema": [],
        "request_body_schema": {
          "id": "record_data",
          "type": "object",
          "description": "Record data for the new Salesforce record",
          "required": true,
          "properties": [
            {
              "id": "FirstName",
              "type": "string",
              "description": "First name of the contact or lead",
              "dynamic_variable": "",
              "constant_value": "",
              "required": false,
              "value_type": "llm_prompt"
            },
            {
              "id": "LastName",
              "type": "string",
              "description": "Last name of the contact or lead",
              "dynamic_variable": "",
              "constant_value": "",
              "required": true,
              "value_type": "llm_prompt"
            },
            {
              "id": "Email",
              "type": "string",
              "description": "Email address. Must be properly formatted: user@domain.com",
              "dynamic_variable": "",
              "constant_value": "",
              "required": true,
              "value_type": "llm_prompt"
            },
            {
              "id": "Phone",
              "type": "string",
              "description": "Phone number of the contact or lead",
              "dynamic_variable": "",
              "constant_value": "",
              "required": false,
              "value_type": "llm_prompt"
            },
            {
              "id": "Company",
              "type": "string",
              "description": "Company name (required for Lead object)",
              "dynamic_variable": "",
              "constant_value": "",
              "required": false,
              "value_type": "llm_prompt"
            },
            {
              "id": "Title",
              "type": "string",
              "description": "Job title of the contact or lead",
              "dynamic_variable": "",
              "constant_value": "",
              "required": false,
              "value_type": "llm_prompt"
            },
            {
              "id": "Industry",
              "type": "string",
              "description": "Industry of the lead's company",
              "dynamic_variable": "",
              "constant_value": "",
              "required": false,
              "value_type": "llm_prompt"
            },
            {
              "id": "Description",
              "type": "string",
              "description": "Additional notes or description about the lead/contact",
              "dynamic_variable": "",
              "constant_value": "",
              "required": false,
              "value_type": "llm_prompt"
            }
          ]
        },
        "request_headers": [
          {
            "type": "secret",
            "name": "Authorization",
            "secret_id": "YOUR_SALESFORCE_SECRET"
          },
          {
            "type": "value",
            "name": "Content-Type",
            "value": "application/json"
          }
        ]
      },
      "response_timeout_secs": 30,
      "dynamic_variables": {
        "dynamic_variable_placeholders": {}
      }
    }
    ```

  </Tab>
</Tabs>

<Warning>
  Ensure that you add your workspace's Salesforce authentication secret to the agent's secrets. Replace `YOUR_SALESFORCE_SECRET` with your actual secret ID.
</Warning>

## Common SOQL Queries

Here are some commonly used SOQL queries for the `salesforce_search_records` tool:

### Search for Contacts by Email
```sql
SELECT Id, Name, Email, Phone, Account.Name FROM Contact WHERE Email = 'customer@example.com'
```

### Search for Leads by Email or Phone
```sql
SELECT Id, Name, Email, Phone, Company, Status FROM Lead WHERE Email = 'customer@example.com' OR Phone = '+1234567890'
```

### Search for Accounts by Name
```sql
SELECT Id, Name, Type, Industry, Phone FROM Account WHERE Name LIKE '%Company Name%'
```

### Search for Recent Opportunities
```sql
SELECT Id, Name, StageName, Amount, CloseDate, Account.Name FROM Opportunity WHERE CreatedDate = THIS_MONTH
```

## Evaluation Configuration

To improve the observability of customer interactions, configure the agent with the following evaluation criteria and data collection parameters.

<Frame
  background="subtle"
  caption="Track how well the AI agent performs against key evaluation criteria like lead qualification, customer engagement, and conversion success."
>
  <img
    src="/assets/images/conversational-ai/salesforce_analysis.png"
    alt="Evaluation criteria for sales interactions"
  />
</Frame>

These settings are added directly to the agent's configuration in the "Analysis" tab to ensure comprehensive monitoring of all customer interactions. This enables tracking of sales performance, lead quality, and customer satisfaction metrics.

## Impact

With this integration in place, you can:

- **Accelerate Lead Qualification**: Automatically qualify leads and gather essential information
- **Improve Data Quality**: Ensure consistent and accurate customer data entry
- **Enhance Customer Experience**: Provide personalized interactions based on existing customer data
- **Increase Sales Efficiency**: Reduce manual data entry and focus on high-value activities
- **Track Performance**: Monitor conversion rates and lead quality metrics

<Frame
  background="subtle"
  caption="Get a high-level overview of each sales conversation and listen to the conversation's audio recording."
>
  <img
    src="/assets/images/conversational-ai/salesforce_conv_overview.png"
    alt="Sales conversation summary dashboard"
  />
</Frame>

<Frame
  background="subtle"
  caption="Track how well the AI agent performs against key sales metrics like lead qualification, customer engagement, and conversion potential."
>
  <img
    src="/assets/images/conversational-ai/salesforce_criteria_eval.png"
    alt="Sales evaluation criteria dashboard"
  />
</Frame>

<Frame
  background="subtle"
  caption="Monitor the customer data collected during each interaction, including contact information, qualification details, and business requirements."
>
  <img
    src="/assets/images/conversational-ai/salesforce_data_collection.png"
    alt="Customer data collection from sales conversations"
  />
</Frame>

<Frame
  background="subtle"
  caption="Review detailed transcripts of sales conversations to understand agent performance, tool usage, and customer interactions."
>
  <img
    src="/assets/images/conversational-ai/salesforce_transcript.png"
    alt="Detailed sales conversation transcript"
  />
</Frame>

## Security Considerations

- Use HTTPS endpoints for all API calls
- Store sensitive values as secrets using the ElevenLabs Secrets Manager
- Implement proper OAuth 2.0 token management and refresh logic
- Follow Salesforce security best practices for Connected Apps
- Ensure proper field-level security is configured in Salesforce
- Regularly audit API access and usage

## Common Salesforce Objects

| Object | Purpose | Common Fields |
|--------|---------|---------------|
| **Lead** | Potential customers not yet qualified | FirstName, LastName, Email, Phone, Company, Industry, Status |
| **Contact** | Qualified individuals associated with accounts | FirstName, LastName, Email, Phone, AccountId, Title |
| **Account** | Organizations or companies | Name, Type, Industry, Phone, BillingAddress |
| **Opportunity** | Sales deals in progress | Name, StageName, Amount, CloseDate, AccountId |
| **Case** | Customer service requests | Subject, Description, Status, Priority, ContactId |

## Troubleshooting

<AccordionGroup>
  <Accordion title="Authentication Issues">
    **Problem**: Getting 401 Unauthorized errors
    
    **Solutions**:
    - Verify your Consumer Key and Consumer Secret are correct
    - Check that the Connected App is properly configured
    - Ensure the OAuth scope includes necessary permissions
    - Verify your access token hasn't expired
  </Accordion>

  <Accordion title="SOQL Query Errors">
    **Problem**: Getting SOQL syntax errors
    
    **Solutions**:
    - Ensure all field names are spelled correctly
    - Check that you have permission to access the fields
    - Verify the object name is correct
    - Use proper SOQL syntax (no SELECT * allowed)
  </Accordion>

  <Accordion title="Record Creation Failures">
    **Problem**: Unable to create records
    
    **Solutions**:
    - Verify required fields are included
    - Check field-level security permissions
    - Ensure data types match field requirements
    - Validate that picklist values are correct
  </Accordion>

  <Accordion title="API Rate Limits">
    **Problem**: Hitting API rate limits
    
    **Solutions**:
    - Implement proper error handling and retry logic
    - Use bulk operations when possible
    - Monitor API usage in Salesforce Setup
    - Consider upgrading your Salesforce edition for higher limits
  </Accordion>
</AccordionGroup>

## Conclusion

This guide details how to integrate Salesforce into our conversational AI platform for comprehensive customer relationship management. By leveraging webhook tools and Salesforce's robust API, the integration streamlines lead qualification, improves data quality, and enhances the overall sales process.

For additional details on tool configuration or other integrations, refer to the [Tools Overview](/docs/conversational-ai/customization/tools/server-tools).

## Additional Resources

- [Salesforce REST API Documentation](https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/)
- [SOQL Query Language Reference](https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/)
- [Connected Apps and OAuth 2.0](https://help.salesforce.com/s/articleView?id=sf.connected_app_overview.htm)
- [Salesforce Security Best Practices](https://help.salesforce.com/s/articleView?id=sf.security_overview.htm) 